<!DOCTYPE html>
<html lang="es">
<head >
	<!-- Favicons -->
	<link rel="apple-touch-icon" href="https://www.cfn.fin.ec/wp-content/themes/cfn/img/favicon.png"/>
	<link rel="icon" href="https://www.cfn.fin.ec/wp-content/themes/cfn/img/favicon.png"/>
	<link rel="icon" href="https://www.cfn.fin.ec/wp-content/themes/cfn/img/favicon.ico"/>

	<title>CFN - Juega</title>

	<!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
	<!-- bootstrap 4 js -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" ></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" ></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" ></script>

    <!-- BootstrapCDN 4 -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<!-- iconos -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://fontawesome.com/v4.7.0/assets/css/site.css">

	<!-- animación css https://github.com/daneden/animate.css-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">

	<!-- Mi estilos -->
	<link rel="stylesheet" href="css/fuente.css">
    <link rel="stylesheet" href="css/estilo.css">
</head>
<body>
	<div class="container">
        <div class="row">
            <div class="col cabeceraFormulario">
                <p>
                    <img src="images/logo.svg" alt="corporacion financiera nacional" style="width: 200px;">
                </p>
                <h1 style="padding: 0px;margin: 0px;">
                    VALORACIÓN EXPERIMENTAL DE PROYECTOS
                </h1>
            </div>
        </div>
		<div class="row">
			<div class="col">
				<h2>
                    <strong> Proyecto 2: Compra de Excavadora para Alquiler </strong>
				</h2>
				<h3>
                    Ubicación: Yanzatza, Morona Santiago<br>
                </h3>
                <p>
                    <b>Capacidad:</b>
                    Un negocio dedicado al alquiler de grúas con operador y otros equipos de construcción, necesita para el giro de su negocio una excavadora hidráulica y capital trabajo operativo/administración. Se proyecta que la nueva máquina labore 8 horas, a un precio de $45 la hora, con 6 días a la semana y 24 días al mes, lo que generaría ingresos mensuales de USD 8,640 e ingresos anuales de USD 103,680
                </p>
                <section>
                    <p>
                        <b>Especificaciones y Valoración:</b> A continuación elige el valor que consideres adecuado para cada rubro a partir de tus conocimientos, experiencia o estimación personal. Mientras más te acerques al valor real, mayor será tu puntaje.
                    </p>
                </section>
                <section>
                </section>
			</div>
		</div>
	</div>
	<div class="container">
		<div class="row">
			<div class="col-xs-12">
				<form class="estadisticaFuncionarios" action="" method="POST">
                    <div class="contenedores">
                        <p>
                            <b>Maquinaria: </b>
                            Excavadora Modelo 320 D2L de Motor mecánico de C7.1 /152 HP, cilindraje de 7011 (428 pulg3), velocidad de giro 10.9 rpm.
                        </p>
                        <div id="alinearTypeRadios1" onclick="todosLosSeleccionados(this.getElementsByTagName('input'),this.id)">
                            <label><input type="radio" name="maquinaria" id="a1" data-valor1="0" data-valor2="150"    value="menos de $150 mil" required  > a) menos de $150 mil</label>
                            <label><input type="radio" name="maquinaria" id="a2" data-valor1="150" data-valor2="200"  value="entre $150 mil y $200 mil"     > b) entre $150 mil y $200 mil</label>
                            <label><input type="radio" name="maquinaria" id="a3" data-valor1="200" data-valor2="250"  value="entre $200 mil y $250 mil"     > c) entre $200 mil y $250 mil</label>
                            <label><input type="radio" name="maquinaria" id="a4" data-valor1="250" data-valor2="300"  value="entre $250 mil y $300 mil"     > d) entre $250 mil y $300 mil</label>
                            <label><input type="radio" name="maquinaria" id="a5" data-valor1="300" data-valor2="0"    value="mas de $300 mil"               > e) mas de $300 mil</label>
                        </div>
                    </div>
                    <div class="contenedores" >
                        <p>
                            <b>Capital de Trabajo Operativo/Administración:  </b>
                            mano de obra directa (operario) y materiales directos (aceites, mantenimiento y reparación, combustible, y póliza de seguro); se considera un factor caja de 45 días
                        </p>
                        <div id="alinearTypeRadios2" onclick="todosLosSeleccionados(this.getElementsByTagName('input'),this.id)">
                            <label><input type="radio" name="capital" id="b1" data-valor1="0" data-valor2="5" value="menos de $5 mil" required  > a) menos de $5 mil</label>
                            <label><input type="radio" name="capital" id="b2" data-valor1="5" data-valor2="6" value="entre $5 mil y $6 mil"     > b) entre $5 mil y $6 mil</label>
                            <label><input type="radio" name="capital" id="b3" data-valor1="6" data-valor2="7" value="entre $6 mil y $7 mil"     > c) entre $6 mil y $7 mil</label>
                            <label><input type="radio" name="capital" id="b4" data-valor1="7" data-valor2="8" value="entre $7 mil y $8 mil"     > d) entre $7 mil y $8 mil</label>
                            <label><input type="radio" name="capital" id="b5" data-valor1="8" data-valor2="0" value="mas de $8 mil"             > e) mas de $8 mil</label>
                        </div>
                    </div>
					<div class="content-btn"> 
						<button type="button" class="btn btn-primary btn-lg btn-block" onclick="guardarenLocaleirasiguiente()"><i class="fa fa-gamepad" aria-hidden="true"></i> SIGUIENTE</button>
					</div>
				</form>
			</div>
		</div>
	</div>
    <div style="width: 100%;height:100px"></div>
    <div class="resultado " >
        <p style="background-color: white;"> VALOR TOTAL</p>
        <input type='text' value='0' disabled id="sumando">
        <p style="background-color: white;"> TEMPORIZADOR</p>
        <input type='text' value='03:00:00' disabled id="temporizador">
    </div>
    <script >
        //ids por modulos
        let idArray = ['alinearTypeRadios1', 'alinearTypeRadios2', 'alinearTypeRadios3', 'alinearTypeRadios4'];
        
        //valor por modulo, cada input seleccionado inicia sus dos lados en 0
        let idValor1 = [0,0];
        let idValor2 = [0,0];

        // id selecionados por modulo
        let selecIds1 = '';
        let selecIds2 = '';

        // id de sumas
        let sumando = document.getElementById('sumando');
        let temporizador = document.getElementById('temporizador');

        function sumaTotal(v1,v2)
        {
            var textoDelate = 'Entre $';
            var textoEnmedio = ' mil y $';
            var textoFinal = ' mil';

            if(
                ((selecIds1 == 'a2' || selecIds1 == 'a3' || selecIds1 == 'a4') ||
                 (selecIds2 == 'b2' || selecIds2 == 'b3' || selecIds2 == 'b4')) &&
                 (selecIds1 != 'a5' && selecIds2 != 'b5')
              )
            {
                sumando.value = textoDelate + v1 + textoEnmedio + v2 + textoFinal;
            }
            else if((selecIds1 == 'a1' && selecIds2 == 'b1') || v1 == 0)
            {
                sumando.value = 'Menos de $' + v2 + ' mil';
            }
            else
            {
                sumando.value = 'Más de $' + v1 + ' mil';
            }         
        }

        function irSumando(e,id)
        {
            var idVl1 = 0;
            var idVl2 = 0;

            var v1 = parseInt(e.dataset.valor1);
            var v2 = parseInt(e.dataset.valor2);

            switch (id) {
                case idArray[0]:
                    idValor1 = [v1,v2];
                    idVl1 = idValor1[0] + idValor2[0];
                    idVl2 = idValor1[1] + idValor2[1];
                    console.log('este es el id: ' + e.id);
                    selecIds1 = e.id;
                    sumaTotal(idVl1,idVl2);
                    break;
                case idArray[1]:
                    idValor2 = [v1,v2];
                    idVl1 = idValor1[0] + idValor2[0];
                    idVl2 = idValor1[1] + idValor2[1];
                    console.log('este es el id: ' + e.id);
                    selecIds2 = e.id;
                    sumaTotal(idVl1,idVl2);
                    break;
                default:
                    console.log('aun no hay valores');
            }
        }

        function todosLosSeleccionados(inputs,idMadre)
        {
            for(var j = 0; j < inputs.length; j++ )
            {
                if(inputs[j].checked)
                {
                    irSumando(inputs[j],idMadre);
                }
            }
        }
        /***************TEMPORIZADOR*************************/
        var tiempoGlobo = 0;
        var min = 2;
        var seg = 59;
        var mils = 59;
        
        cronometro();
        function cronometro()
        {
            if(tiempoGlobo==0)
            {
                ejecutaCronometro();
            }
            else
            {
                tiempoGlobo = 0;
            }
        }

        /*++++++++++++++++++++++++Funcion que hace que los***************************/
        function ejecutaCronometro()
        {
            if(mils < 0)
            {
                --seg;
                mils = 59;
            }
            else if (seg < 0)
            {
                --min;
                seg = 59;
            }
            else if(min == 0 && seg == 0 && mils == 0)
            {
                clearTimeout(tiempoGlobo);
                guardarenLocaleirasiguiente();
                return;
            }
            else{
                --mils;
            }
            temporizador.value = LeadingZero(min) + ':' + LeadingZero(seg) + ':' + LeadingZero(mils);
            tiempoGlobo = setTimeout("ejecutaCronometro()", 15);//15 es el tiempo de milesegundos para que cuando llegue a sesenta marque un segundo
        }
        function LeadingZero(Time) {
            return (Time < 10) ? "0" + Time : + Time;
        }
        /////////////////////////////////////////////////
        
        function guardarenLocaleirasiguiente()
        {
            // id de sumas
            var idSenalados = [selecIds1,selecIds2,'sumando','temporizador'];
            var valoresFormulario = ['Encuesta2-valor1','Encuesta2-valor2','Encuesta2-sumaTotal','Encuesta2-temporizador'];
            for (var i = 0; i < idSenalados.length; i++)
            {
                if (idSenalados[i] != '')
                {
                    localStorage.setItem(valoresFormulario[i], document.getElementById(idSenalados[i]).value);
                }
                else
                {
                    localStorage.setItem(valoresFormulario[i], 'vacio');
                }
            }
            window.location = "encuestaFuncionariosTres.html";
        }
	</script>
</body>
</html>